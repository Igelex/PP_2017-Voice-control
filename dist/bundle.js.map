{"version":3,"sources":["webpack:///webpack/bootstrap 955e8baf79c1ad094750","webpack:///./public/javascripts/controller.js","webpack:///./public/javascripts/dependencies.js","webpack:///./public/javascripts/const.js","webpack:///./public/javascripts/visualizer.js"],"names":["elements","selectedInputField","inputMode","window","onload","$","click","checkInputType","val","userCommand","t0","performance","now","toString","toLowerCase","trim","result","test","changeInputMode","splitUserCommand","console","log","searchForButtons","scrollDown","scrollUp","searchForInputfields","searchElements","textContent","length","selectElements","t1","selector","userInput","selectedElements","i","search","hasValueAttribut","push","style","border","undefined","is","next","focus","backgroundColor","color","error","element","value","hasPlaceholderAttribut","placeholder","newInputMode","blur","animate","scrollTop","innerHeight","sendRequest","ajax","host","port","dataType","url","type","done","data","fail","jqXHR","errorMessage","command","slice","indexOf","isVisible","elem","docViewTop","elemBottom","SpeechRecognition","webkitSpeechRecognition","recognition","lang","interimResults","onresult","event","results","transcript","info","addEventListener","start","e","scriptJquery","document","createElement","scriptAnnyang","scriptSpeechKitt","src","getElementsByTagName","appendChild","CLICK_SELECTORS","GO_TO_SELECTORS","CHECK_SELECTORS","SELECT_SELECTORS","SEARCH_SELECTORS","CLICK","CHECK","GO_TO","OFF","SELECT","SCROLL_UP","SCROLL_DOWN","SCROLL_TO_BOTTOM","SCROLL_TO_TOP","SEARCH","STOP","REG_EXP_CLICK","REG_EXP_GO_TO","REG_EXP_OFF","REG_EXP_SEARCH","REG_EXP_CHECK","REG_EXP_SELECT","REG_EXP_SCROLL_UP","REG_EXP_SCROLL_DOWN","REG_EXP_SCROLL_TO_TOP","REG_EXP_SCROLL_TO_BOTTOM","REG_EXP_STOP","MODE_TYPE","MODE_SELECT","MODE_NO_MODE","speechRecognition","Storage","localStorage","getItem","setItem","runAudioContext","startAudioRecord","stopAudioContext","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","audioCtx","AudioContext","webkitAudioContext","source","analyser","createAnalyser","minDecibels","maxDecibels","smoothingTimeConstant","audioChunks","rec","isRecording","distortion","createWaveShaper","gainNode","createGain","biquadFilter","createBiquadFilter","convolver","createConvolver","canvas","querySelector","canvasCtx","getContext","WIDTH","width","HEIGHT","height","drawVisual","audio","stream","createMediaStreamSource","connect","destination","visualize","voiceMute","MediaRecorder","ondataavailable","onstop","Blob","recordedAudio","URL","createObjectURL","controls","audioDownload","href","download","innerHTML","err","fftSize","bufferLengthAlt","frequencyBinCount","dataArrayAlt","Uint8Array","clearRect","drawAlt","requestAnimationFrame","getByteFrequencyData","fillStyle","fillRect","barWidth","barHeight","x","gain","state","suspend","then","cancelAnimationFrame","resume","getAverageVolume","array","values","average","setTimeOut","setTimeout","stop"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 955e8baf79c1ad094750","/**\r\n * Created by Pastuh on 19.10.2017.\r\n */\r\n\r\nimport bindDependencies from './dependencies';\r\nimport {\r\n    SELECT_SELECTORS, CHECK_SELECTORS, CLICK_SELECTORS, SEARCH_SELECTORS, GO_TO_SELECTORS,\r\n    CLICK, GO_TO, OFF, SELECT, CHECK, SCROLL_DOWN, SCROLL_UP, SCROLL_TO_BOTTOM, SCROLL_TO_TOP, SEARCH, STOP,\r\n    REG_EXP_CLICK, REG_EXP_GO_TO, REG_EXP_OFF, REG_EXP_SEARCH, REG_EXP_CHECK, REG_EXP_SELECT, REG_EXP_SCROLL_DOWN,\r\n    REG_EXP_SCROLL_TO_TOP, REG_EXP_SCROLL_TO_BOTTOM, REG_EXP_STOP, REG_EXP_SCROLL_UP,\r\n    MODE_TYPE, MODE_SELECT, MODE_NO_MODE\r\n} from './const';\r\nimport speechRecognition from './visualizer';\r\n\r\nbindDependencies();\r\n\r\nlet elements = [];\r\nlet selectedInputField;\r\nlet inputMode = '';\r\n\r\nwindow.onload = function () {\r\n\r\n    speechRecognition();\r\n\r\n    $('#start-search').click(function () {\r\n        checkInputType($('#search-input').val());\r\n    });\r\n\r\n    function checkInputType(userCommand) {\r\n\r\n        let t0 = performance.now();\r\n\r\n        userCommand.toString().toLowerCase().trim();\r\n        let result;\r\n\r\n        if (REG_EXP_STOP.test(userCommand)) {\r\n            changeInputMode(MODE_NO_MODE);\r\n        }\r\n\r\n        if (inputMode !== MODE_TYPE && inputMode !== MODE_SELECT) {\r\n            switch (true) {\r\n                case REG_EXP_CLICK.test(userCommand):\r\n                    changeInputMode(MODE_NO_MODE);\r\n                    result = splitUserCommand(userCommand, CLICK);\r\n                    if (result) {\r\n                        console.log('Search string for CLICKS: ' + result);\r\n                        searchForButtons(CLICK_SELECTORS, result);\r\n                    }\r\n                    break;\r\n                case REG_EXP_SCROLL_DOWN.test(userCommand):\r\n                    scrollDown();\r\n                    break;\r\n                case REG_EXP_SCROLL_UP.test(userCommand):\r\n                    scrollUp();\r\n                    break;\r\n                case REG_EXP_SCROLL_TO_TOP.test(userCommand):\r\n                    scrollDown();\r\n                    break;\r\n                case REG_EXP_SCROLL_TO_BOTTOM.test(userCommand):\r\n                    scrollUp();\r\n                    break;\r\n                case REG_EXP_GO_TO.test(userCommand):\r\n                    result = splitUserCommand(userCommand, GO_TO);\r\n                    if (result) {\r\n                        console.log('Search string: ' + result);\r\n                        searchForInputfields(GO_TO_SELECTORS, result)\r\n                    }\r\n                    break;\r\n                case REG_EXP_SELECT.test(userCommand):\r\n\r\n                    break;\r\n                case REG_EXP_SEARCH.test(userCommand):\r\n\r\n                    break;\r\n                case REG_EXP_CHECK.test(userCommand):\r\n                    result = splitUserCommand(userCommand, CHECK);\r\n                    if (result) {\r\n                        searchElements(CHECK_SELECTORS, userCommand);\r\n                    }\r\n                    break;\r\n                case REG_EXP_OFF.test(userCommand):\r\n\r\n                    break;\r\n                case REG_EXP_STOP.test(userCommand):\r\n                    changeInputMode(MODE_NO_MODE);\r\n                    break;\r\n                default:\r\n            }\r\n        } else if (inputMode === MODE_TYPE && selectedInputField) {\r\n            console.log('---------Typing text......: ' + userCommand);\r\n            let textContent = $(selectedInputField).val();\r\n            if (textContent.trim().length === 0) {\r\n                textContent += userCommand;\r\n            } else {\r\n                textContent += ' ' + userCommand;\r\n            }\r\n            $(selectedInputField).val(textContent);\r\n        } else if (inputMode === MODE_SELECT) {\r\n            //Kommt\r\n        }\r\n\r\n        selectElements(elements);\r\n\r\n        elements = [];\r\n\r\n        let t1 = performance.now();\r\n        console.log('Execution time: ' + (t1 - t0) + ' mil');\r\n    }\r\n\r\n    function searchForInputfields(selector, userInput) {\r\n        selectedInputField = null;\r\n\r\n        let selectedElements = $(selector);\r\n\r\n        if (selectedElements.length > 0) {\r\n            for (let i = 0; i < selectedElements.length; i++) {\r\n\r\n                console.log('######Found Inputfields#####: ' + selectedElements[i].textContent);\r\n\r\n                if (selectedElements[i].textContent.toLowerCase().trim().search(userInput) !== -1\r\n                    || hasValueAttribut(selectedElements[i], userInput)) {\r\n                    elements.push(selectedElements[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function searchForButtons(selector, userInput) {\r\n\r\n        let selectedElements = $(selector);\r\n\r\n        if (selectedElements.length > 0) {\r\n            for (let i = 0; i < selectedElements.length; i++){\r\n\r\n                console.log('######Found Buttons#####: ' + selectedElements[i].textContent);\r\n\r\n                if (selectedElements[i].textContent.toLowerCase().trim().search(userInput) !== -1\r\n                    || hasValueAttribut(selectedElements[i], userInput)) {\r\n                    elements.push(selectedElements[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function selectElements() {\r\n        //console.log('++++Count Elemets+++++: ' + elements.length);\r\n        if (elements.length >= 2) {\r\n            for (let i = 0; i < elements.length; i++) {\r\n                elements[i].style.border = 'black 5px solid';\r\n                console.log('++++Selected Elemets+++++: ' + elements[i].textContent);\r\n            }\r\n        } else if (elements.length === 1 && elements[0] !== undefined) {\r\n            if ($(elements).is('label')) {\r\n                changeInputMode(MODE_TYPE);\r\n                $(elements).next().focus();\r\n                selectedInputField = $(elements).next();\r\n            } else {\r\n                console.log('++++Selected Elemets+++++: ' + elements[0].textContent);\r\n                elements[0].style.backgroundColor = 'black';\r\n                elements[0].style.color = 'white';\r\n                elements[0].click();\r\n            }\r\n        } else {\r\n            console.error('-------------No element found------------------------------');\r\n        }\r\n    }\r\n\r\n    function hasValueAttribut(element, userInput) {\r\n        if (element.value !== undefined) {\r\n            if (element.value.toString().toLowerCase().search(userInput) !== -1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function hasPlaceholderAttribut(element, userInput) {\r\n        if (element.placeholder !== undefined) {\r\n            if (element.placeholder.toString().toLowerCase().search(userInput) !== -1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function changeInputMode(newInputMode) {\r\n        inputMode = newInputMode;\r\n        if (inputMode !== MODE_TYPE) {\r\n            $(selectedInputField).blur();\r\n            selectedInputField = null;\r\n        }\r\n        console.log('------MODE------ ' + inputMode);\r\n    }\r\n\r\n    function scrollDown() {\r\n        $('html, body').animate({\r\n            scrollTop: $(window).scrollTop() + (window.innerHeight / 2)\r\n        });\r\n    }\r\n\r\n    function scrollUp() {\r\n        $('html, body').animate({\r\n            scrollTop: $(window).scrollTop() - (window.innerHeight / 2)\r\n        });\r\n    }\r\n\r\n    function sendRequest() {\r\n        $.ajax({\r\n            host: 'localhost',\r\n            port: '3000',\r\n            dataType: 'text',\r\n            url: '/test',\r\n            type: 'POST'\r\n        }).done(function (data) {\r\n            //alert('Greetings from Server: ' + data);\r\n            console.log(data);\r\n            checkInputType(data);\r\n        }).fail(function (jqXHR, errorMessage, error) {\r\n            console.log('AJAX error: ' + error);\r\n        });\r\n    }\r\n    \r\n    function splitUserCommand(userCommand, command) {\r\n        return userCommand.slice((userCommand.indexOf(command) + command.length)).trim();\r\n    }\r\n\r\n    function isVisible(elem) {\r\n\r\n        let docViewTop = $(window).scrollTop();\r\n\r\n        return ((elemBottom = docViewTop));\r\n    }\r\n\r\n    /**\r\n     *Setup Google Speech Recognition\r\n     */\r\n    try {\r\n        window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n        const recognition = new SpeechRecognition();\r\n\r\n        recognition.lang = 'en-US';\r\n        recognition.interimResults = false;\r\n\r\n        /*if (inputMode){\r\n            recognition.addEventListener('result', e => {\r\n                const transcript = Array.from(e.results)\r\n                    .map(result => result[0])\r\n                    .map(result => result.transcript)\r\n                    .join('')\r\n                console.log('**********'  + transcript);\r\n                if (e.results[0].isFinal){\r\n                    checkInputType(result);\r\n                }\r\n            });\r\n        }*/\r\n        recognition.onresult = function (event) {\r\n            let result = event.results[0][0].transcript;\r\n            console.info('-----ON RESULT------: ' + result);\r\n            if (result) {\r\n                checkInputType(result);\r\n            }\r\n        };\r\n        recognition.addEventListener('end', recognition.start);\r\n        recognition.start();\r\n    }\r\n    catch (e) {\r\n        console.log('Web Speech error: ' + e);\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/controller.js","/*\r\n* Bind needed Libraries in HTML\r\n* */\r\nexport default function() {\r\n    console.log('IN Dependencies !!!!!!!!!');\r\n    let scriptJquery = document.createElement('script');\r\n    let scriptAnnyang = document.createElement('script');\r\n    let scriptSpeechKitt = document.createElement('script');\r\n    scriptJquery.src = '//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js';\r\n    scriptAnnyang.src = '//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js';\r\n    scriptSpeechKitt.src = '//cdnjs.cloudflare.com/ajax/libs/SpeechKITT/0.3.0/speechkitt.min.js';\r\n    console.log('SCRIPT !!!!!!!!!' + scriptJquery.src.toString());\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(scriptJquery);\r\n    document.getElementsByTagName('head')[0].appendChild(scriptAnnyang);\r\n    document.getElementsByTagName('head')[0].appendChild(scriptSpeechKitt);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/dependencies.js","/**\r\n * Selectors\r\n */\r\nconst CLICK_SELECTORS = 'a, li, :button';\r\nconst GO_TO_SELECTORS = 'label, input[type=\"email\"], input[type=\"text\"], input[type=\"password\"], input[type=\"number\"],' +\r\n    'input[type=\"search\"], input[type=\"tel\"]';\r\nconst CHECK_SELECTORS = 'input[type=\"checkbox\"], input[type=\"radio\"]';\r\nconst SELECT_SELECTORS = 'input[type=\"checkbox\"], input[type=\"radio\"]';\r\nconst SEARCH_SELECTORS = 'input[type=\"search\"]';\r\n/**\r\n * Keywords\r\n */\r\nconst CLICK = 'click';\r\nconst CHECK = 'check';\r\nconst GO_TO = 'go to';\r\nconst OFF = 'off';\r\nconst SELECT = 'select';\r\nconst SCROLL_UP = 'scroll up';\r\nconst SCROLL_DOWN = 'scroll down';\r\nconst SCROLL_TO_BOTTOM = 'scroll to bottom';\r\nconst SCROLL_TO_TOP = 'scroll to top';\r\nconst SEARCH = 'search';\r\nconst STOP = 'stop';\r\n/**\r\n * RegExp\r\n */\r\nlet REG_EXP_CLICK = /(click)\\s[[a-zA-Z0-9\\.]/;\r\nlet REG_EXP_GO_TO = /(go to)\\s[[a-zA-Z0-9\\.]/;\r\nlet REG_EXP_OFF = /^(off)$/;\r\nlet REG_EXP_SEARCH = /^(search)$/;\r\nlet REG_EXP_CHECK = /(check)\\s[[a-zA-Z0-9\\.]/;\r\nlet REG_EXP_SELECT = /(select)\\s[[a-zA-Z0-9\\.]/;\r\nlet REG_EXP_SCROLL_UP = /(scroll up)(\\s[[a-zA-Z0-9\\.])?/;\r\nlet REG_EXP_SCROLL_DOWN = /(scroll down)(\\s[[a-zA-Z0-9\\.])?/;\r\nlet REG_EXP_SCROLL_TO_TOP = /(scroll)\\s(to\\s)?(top)(\\s[[a-zA-Z0-9\\.])?/;\r\nlet REG_EXP_SCROLL_TO_BOTTOM = /(scroll)\\s(to\\s)?(bottom)(\\s[[a-zA-Z0-9\\.])?/;\r\nlet REG_EXP_STOP = /^(stop)$/;\r\nconsole.log(REG_EXP_SCROLL_UP.test('scroll up'));\r\n/**\r\n * Input Mode\r\n * */\r\nconst MODE_TYPE = 'type';\r\nconst MODE_SELECT = 'select';\r\nconst MODE_NO_MODE = '';\r\n/**\r\n * Export consts\r\n */\r\nexport {SELECT_SELECTORS, CHECK_SELECTORS, CLICK_SELECTORS, SEARCH_SELECTORS, GO_TO_SELECTORS,\r\n        CLICK, GO_TO, OFF, SELECT,SCROLL_DOWN, SCROLL_UP, SCROLL_TO_BOTTOM, SCROLL_TO_TOP, SEARCH, CHECK, STOP,\r\n        REG_EXP_CLICK, REG_EXP_GO_TO, REG_EXP_OFF, REG_EXP_SEARCH, REG_EXP_CHECK, REG_EXP_SELECT, REG_EXP_SCROLL_DOWN,\r\n                                 REG_EXP_SCROLL_TO_TOP, REG_EXP_SCROLL_TO_BOTTOM,REG_EXP_STOP, REG_EXP_SCROLL_UP,\r\n        MODE_TYPE, MODE_SELECT, MODE_NO_MODE};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/const.js","export default function speechRecognition() {\r\n\r\n    $('#startRecord').click(function () {\r\n        /*if (typeof (Storage) !== 'undefined') {\r\n         console.log('audio value : ' + localStorage.getItem('audio'));\r\n         if (localStorage.getItem('audio') == true) {\r\n             runAudioContext();\r\n             startAudioRecord();\r\n             $('#startRecord').textContent = 'Stop';\r\n             console.log('Audio settings stored');\r\n        } else {\r\n         console.log('Storage is undefined: ' + Storage);\r\n        }*/\r\n\r\n        if (this.textContent.toLowerCase().trim() === 'start') {\r\n            if (typeof (Storage) == undefined) {\r\n                if (localStorage.getItem('audio') !== true) {\r\n                    localStorage.setItem('audio', true);\r\n                    console.log('Save audio settings');\r\n                }\r\n            }\r\n            //recognition.start();\r\n            runAudioContext();\r\n            startAudioRecord();\r\n            this.textContent = 'Stop';\r\n        } else {\r\n            stopAudioContext();\r\n            this.textContent = 'Start';\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Setup Web Audio API\r\n     * */\r\n    navigator.getUserMedia = (navigator.getUserMedia ||\r\n        navigator.webkitGetUserMedia ||\r\n        navigator.mozGetUserMedia ||\r\n        navigator.msGetUserMedia);\r\n\r\n// set up forked web audio context, for multiple browsers\r\n// window. is needed otherwise Safari explodes\r\n\r\n    let audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n    let source;\r\n\r\n//set up the different audio nodes we will use for the app\r\n    let analyser = audioCtx.createAnalyser();\r\n    analyser.minDecibels = -90;\r\n    analyser.maxDecibels = -10;\r\n    analyser.smoothingTimeConstant = 0.85;\r\n\r\n    let audioChunks = [];\r\n    let rec;\r\n    let isRecording = false;\r\n\r\n    let distortion = audioCtx.createWaveShaper();\r\n    let gainNode = audioCtx.createGain();\r\n    let biquadFilter = audioCtx.createBiquadFilter();\r\n    let convolver = audioCtx.createConvolver();\r\n\r\n// set up canvas context for visualizer\r\n\r\n    let canvas = document.querySelector('.visualizer');\r\n    let canvasCtx = canvas.getContext(\"2d\");\r\n    const WIDTH = canvas.width;\r\n    const HEIGHT = canvas.height;\r\n    let drawVisual;\r\n\r\n//main block for doing the audio recording\r\n    function startAudioRecord() {\r\n        console.log('Start Audio Record');\r\n        if (navigator.getUserMedia) {\r\n            console.log('getUserMedia supported.');\r\n            navigator.getUserMedia(\r\n                // constraints - only audio needed for this app\r\n                {\r\n                    audio: true\r\n                },\r\n\r\n                // Success callback\r\n                function (stream) {\r\n                    source = audioCtx.createMediaStreamSource(stream);\r\n                    source.connect(analyser);\r\n                    analyser.connect(distortion);\r\n                    distortion.connect(biquadFilter);\r\n                    biquadFilter.connect(convolver);\r\n                    convolver.connect(gainNode);\r\n                    gainNode.connect(audioCtx.destination);\r\n                    visualize();\r\n                    voiceMute();\r\n\r\n                    rec = new MediaRecorder(stream);\r\n\r\n                    rec.ondataavailable = e => {\r\n                        audioChunks.push(e.data);\r\n                    };\r\n                    rec.onstop = function () {\r\n\r\n                        isRecording = false;\r\n\r\n                        if (audioChunks.length > 0) {\r\n                            let audio = new Blob(audioChunks, {type: 'audio/wave'});\r\n                            recordedAudio.src = URL.createObjectURL(audio);\r\n                            recordedAudio.controls = true;\r\n                            audioDownload.href = recordedAudio.src;\r\n                            audioDownload.download = 'wave';\r\n                            audioDownload.innerHTML = 'download';\r\n                            audioChunks = [];\r\n                        }\r\n                    }\r\n                },\r\n                // Error callback\r\n                function (err) {\r\n                    console.log('The following gUM error occured: ' + err);\r\n                }\r\n            );\r\n        } else {\r\n            console.log('getUserMedia not supported on your browser!');\r\n        }\r\n\r\n        function visualize() {\r\n            analyser.fftSize = 512;\r\n            let bufferLengthAlt = analyser.frequencyBinCount;\r\n            console.log(bufferLengthAlt);\r\n            let dataArrayAlt = new Uint8Array(bufferLengthAlt);\r\n\r\n            canvasCtx.clearRect(0, 0, WIDTH, HEIGHT);\r\n\r\n            let drawAlt = function () {\r\n                drawVisual = requestAnimationFrame(drawAlt);\r\n\r\n                analyser.getByteFrequencyData(dataArrayAlt);\r\n\r\n                canvasCtx.fillStyle = '#f5f5f5';\r\n                canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);\r\n\r\n                let barWidth = (WIDTH / bufferLengthAlt) * 2.5;\r\n                let barHeight;\r\n                let x = 0;\r\n\r\n                for (let i = 0; i < bufferLengthAlt; i++) {\r\n                    barHeight = dataArrayAlt[i];\r\n                    canvasCtx.fillStyle = 'rgb(' + (barHeight + 100) + ',50,50)';\r\n                    canvasCtx.fillRect(x, HEIGHT - barHeight / 2, barWidth, barHeight / 2);\r\n\r\n                    x += barWidth + 1;\r\n\r\n                    /*if (barHeight >= 100) {\r\n                        /!*console.log('#####' + barHeight);*!/\r\n                        if (isRecording === false) {\r\n                            console.log('...Starting recorder');\r\n                            rec.start();\r\n                            isRecording = true;\r\n                            setTimeOut();\r\n                        }\r\n                    }*/\r\n                }\r\n            };\r\n            drawAlt();\r\n        }\r\n\r\n    }\r\n\r\n    function voiceMute() {\r\n        gainNode.gain.value = 0;\r\n    }\r\n\r\n    function stopAudioContext() {\r\n        //sendRequest();\r\n        if (audioCtx.state === 'running') {\r\n            audioCtx.suspend().then(function () {\r\n                window.cancelAnimationFrame(drawVisual);\r\n                canvasCtx.clearRect(0, 0, WIDTH, HEIGHT);\r\n                canvasCtx.fillStyle = \"transparent\";\r\n                canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);\r\n                console.log('AudioContext state: ' + audioCtx.state);\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    function runAudioContext() {\r\n        if (audioCtx.state === 'suspended' || audioCtx.state === 'closed') {\r\n            audioCtx.resume().then(function () {\r\n                console.log('AudioContext state: ' + audioCtx.state);\r\n            });\r\n        }\r\n    }\r\n\r\n    function getAverageVolume(array) {\r\n        let values = 0;\r\n        let average;\r\n        let length = array.length;\r\n        // get all the frequency amplitudes\r\n        for (let i = 0; i < length; i++) {\r\n            values += array[i];\r\n        }\r\n        average = values / length;\r\n        console.log('AVArAGE:' + average);\r\n        return average;\r\n    }\r\n\r\n    function setTimeOut() {\r\n        setTimeout(function () {\r\n            rec.stop();\r\n            sendRequest();\r\n            console.log('...Stopping recorder');\r\n        }, 1500);\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/visualizer.js"],"sourceRoot":""}